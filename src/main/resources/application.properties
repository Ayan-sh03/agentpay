# Application type - reactive for better agent performance
spring.main.web-application-type=reactive
spring.main.allow-bean-definition-overriding=true

# OPA (Open Policy Agent) configuration
# Use explicit loopback IP to avoid IPv6/IPv4 localhost resolution quirks on Windows
opa.url=http://127.0.0.1:8181
app.opa.policy.path=classpath:policies/agent_policy.rego

# JWT configuration for agent authentication
app.jwt.secret=change-me-in-production-secret-key-32-chars
app.jwt.expiration=3600

# AES-GCM encryption key (must be exactly 32 characters)
app.encryption.key=change-me-in-production-32-chars

# Redis for caching and simple rate limiting
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms

# Agent-specific rate limiting (requests per minute per agent)
app.rate-limit.requests-per-minute=100
app.rate-limit.burst-capacity=150

# Remove old gateway config that's causing compilation issues

# Enable scheduling for policy updates and cleanup tasks
spring.task.scheduling.pool.size=2
# H2 database configuration for local development
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Flyway configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true