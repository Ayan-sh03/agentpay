spring.main.web-application-type=reactive
spring.main.allow-bean-definition-overriding=true
opa.url=http://localhost:8181
app.encryption.key=test-key-for-encryption
app.opa.policy.path=classpath:policies/comprehensive_policy.rego

# Redis configuration for rate limiting
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms

# Rate limiting configuration
spring.cloud.gateway.routes[0].id=payment_route
spring.cloud.gateway.routes[0].uri=http://localhost:8080
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/**
spring.cloud.gateway.routes[0].filters[0].name=RequestRateLimiter
spring.cloud.gateway.routes[0].filters[0].args.redis-rate-limiter.replenishRate=10
spring.cloud.gateway.routes[0].filters[0].args.redis-rate-limiter.burstCapacity=20
spring.cloud.gateway.routes[0].filters[0].args.key-resolver=#{@remoteAddrKeyResolver}

# Enable scheduling for policy updates
spring.task.scheduling.pool.size=2
# H2 database configuration for local development
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Flyway configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true